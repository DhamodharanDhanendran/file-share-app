#!/bin/bash

# List of Managed Prefix List IDs
PREFIX_LIST_IDS=(
  "pl-000f9420a91cfc3b6"
  "pl-0025c936f2aacf048"
  "pl-00432d7a935a1ed6a"
  "pl-00614718e12b273bb"
  "pl-00681cfc4af1034e0"
  "pl-0068613c321dee54b"
  "pl-0069e754cdfc553c4"
  "pl-008035c4e147f168f"
  "pl-0081dd30a0b7c6e7a"
  "pl-00a54069"
  "pl-00bf361b333242028"
  "pl-00ec8fd779e5b4175"
  "pl-0100d31638d9d3604"
  "pl-01d3075872a82bb3f"
  "pl-024ce7d4371b683a9"
  "pl-029debe66aa9d13b3"
  "pl-02cd2c6b"
  "pl-02e3d46ded3c2660d"
  "pl-031949a747cc0869f"
  "pl-03274d152e8c8a50e"
  "pl-03384955215625250"
  "pl-033e44023025215c0"
  "pl-035da5473f4b423a4"
  "pl-03743f81267c0a85e"
  "pl-0377db02afc56729d"
  "pl-03915406641cb1f53"
  "pl-03be024c5963cee10"
  "pl-03fa6b266557b0d4f"
  "pl-0419ec9f6f614c525"
  "pl-043e576ae071614c6"
  "pl-04769b5e3211fcd46"
  "pl-047d464325e7bf465"
  "pl-04983e181be8944e7"
  "pl-04a52a40be3e2c193"
  "pl-055e7992f0c5b0839"
  "pl-056070096acc3b3ed"
  "pl-056ce410ec9953f2f"
  "pl-059b3e0b02af70e4d"
  "pl-059d8786dae17d9ec"
  "pl-05c0959a59362110e"
  "pl-05cadb937455b8b91"
  "pl-05dd85afd40d6181a"
  "pl-05ed086c"
  "pl-062e1d6f8317caab5"
  "pl-0637af5e52c24fd2f"
  "pl-064c06aa11bcb2f0c"
  "pl-067eefa539e593d55"
  "pl-06da045b37607c8a5"
  "pl-071b02a85c8cf8729"
  "pl-0721453c7ac4ec009"
  "pl-073555187c4e6ccf2"
  "pl-073f7512b7b9a2450"
  "pl-075a07d1abc7dbe5a"
  "pl-075e2b43f16f625b8"
  "pl-078d6f190f393e7fa"
  "pl-07cbd8b5e26960eac"
  "pl-07e48edfbf08bacf1"
  "pl-07f2461c1e98ac341"
  "pl-082b2916fa6d7b4b7"
  "pl-0839cc4c195a4e751"
  "pl-0844ea0e857ef6ce0"
  "pl-086543b458dc7add9"
  "pl-087f83ba4f34e3bea"
  "pl-0893b56c16019f7d8"
  "pl-08a1be47933f873ab"
  "pl-08a6a3685cc410c2d"
  "pl-08c8dbfdeb99a899b"
  "pl-08d24302b8c4d2b73"
  "pl-08d9db512f7ada124"
  "pl-08f3b623edaef7407"
  "pl-090d236323d6dc5d9"
  "pl-09303cf8136420840"
  "pl-09404d738b5d5414c"
  "pl-0954453c3fbcdd8a5"
  "pl-098248765e9effc20"
  "pl-09aafc9654af00b9f"
  "pl-09f90e410b133fe9f"
  "pl-0a29265a06ed0e2f4"
  "pl-0a482994893fdb5a8"
  "pl-0a68795a608c119db"
  "pl-0a8aa53c1986bfb45"
  "pl-0b18cbe76f13b2ad0"
  "pl-0b1d1d5f85cda77da"
  "pl-0b5bdb82abb4bd9f5"
  "pl-0b63e1e2e12cd57b3"
  "pl-0b90cb0be8b582cc7"
  "pl-0bb61442d9cd92224"
  "pl-0bd77a95ba8e317a6"
  "pl-0beea00ad1821f2ef"
  "pl-0bf616f91f5463e58"
  "pl-0c3d600e9481d5e46"
  "pl-0c711dc34c6f2a9d0"
  "pl-0cbf975b710a608ea"
  "pl-0cc36273da754ebdc"
  "pl-0cd842b438fee3b4b"
  "pl-0cfb24212614905ca"
  "pl-0d60f5d0954244d7f"
  "pl-0d645b6ffc124ccac"
  "pl-0d98a20ad30aca6e7"
  "pl-0d9b804fe014a6a99"
  "pl-0ddaf0b3d939cce0f"
  "pl-0de8136a37cbef6b8"
  "pl-0e10dc8019e3c0a32"
  "pl-0e1bc5673b8a57acc"
  "pl-0e4bcff02b13bef1e"
  "pl-0e5696d987d033653"
  "pl-0e857c10abacabc80"
  "pl-0e8ed7acb7d632222"
  "pl-0e99958a47b22d6ab"
  "pl-0e9c3ed9a9957ecc3"
  "pl-0eeb0e67"
  "pl-0f2a97ab210dbbae1"
  "pl-0f8cdc7e2b7903425"
  "pl-0fa83cebf909345ca"
  "pl-0fe2d6a81aa341e4f"
  "pl-0fffe744baac80530"
)

# Iterate over each prefix list ID
for PREFIX_LIST_ID in "${PREFIX_LIST_IDS[@]}"
do
  echo "Attempting to delete managed prefix list: $PREFIX_LIST_ID"
  aws ec2 delete-managed-prefix-list --prefix-list-id $PREFIX_LIST_ID
  if [ $? -eq 0 ]; then
    echo "Successfully deleted: $PREFIX_LIST_ID"
  else
    echo "Failed to delete: $PREFIX_LIST_ID. Ensure there are no dependencies."
  fi
done

echo "Deletion process complete."
